<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data: https:; connect-src 'self'; frame-src 'self' https: about:; form-action 'self' https:; object-src 'none'; base-uri 'self'; frame-ancestors 'none'; upgrade-insecure-requests; block-all-mixed-content">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <title>Work Dashboard</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%9A%80%3C/text%3E%3C/svg%3E">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <script src="config.example.js" defer></script>
  <script src="config-loader.js" defer></script>
  <script src="config.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <header class="site-header">
    <div class="header-left">
      <h1 class="site-title">Work Dashboard</h1>
    </div>
    <div class="header-right">
      <button id="themeToggle" class="theme-toggle" aria-label="Toggle color theme" title="Toggle theme">üåì</button>
    </div>
  </header>

  <main class="container">
    <section class="search-widgets">
      <div class="card">
        <h2>Google Search</h2>
        <form id="googleForm" class="search-form" autocomplete="off">
          <label for="googleQuery" class="sr-only">Google search query</label>
          <input id="googleQuery" name="q" type="search" placeholder="Search Google" inputmode="search" aria-describedby="googleHelp">
          <button type="submit">Search</button>
        </form>
        <p id="googleHelp" class="sr-only">Type your query and press Enter to search Google. Tip: press / to focus this box.</p>
      </div>

      <div class="card">
        <h2>go/ Intranet</h2>
        <form id="goForm" class="search-form" autocomplete="off">
          <label for="goQuery" class="sr-only">Enter go/ key or keyword</label>
          <input id="goQuery" name="go" type="text" placeholder="go/ or go/KEYWORD or KEYWORD" aria-describedby="goHelp">
          <button type="submit">Go</button>
        </form>
        <p id="goHelp" class="hint">Examples: <code>go/</code>, <code>go/PAM</code>, <code>PAM</code></p>
      </div>
    </section>

    <section class="card" aria-labelledby="cfg-title">
      <h2 id="cfg-title">Configuration</h2>
      <div class="config-actions">
        <button id="cfg-export-file" title="Download current configuration as JSON">Export Config ‚Üì</button>
        <button id="cfg-export-url" title="Copy shareable URL with config in hash">Share via URL</button>
        <button id="cfg-export-clipboard" title="Copy configuration JSON to clipboard">Copy JSON</button>
      </div>
      <div class="config-actions">
        <button id="cfg-import-file-replace" title="Import JSON file and replace current configuration">Import File (Replace)</button>
        <button id="cfg-import-file-merge" title="Import JSON file and merge with current configuration">Import File (Merge)</button>
        <button id="cfg-import-clipboard-replace" title="Paste JSON from clipboard and replace configuration">Clipboard Import (Replace)</button>
        <button id="cfg-import-clipboard-merge" title="Paste JSON from clipboard and merge into configuration">Clipboard Import (Merge)</button>
        <button id="cfg-load-url" title="Apply configuration from current page URL hash (#config=...) or paste a URL">Load from URL</button>
      </div>
      <input id="cfg-file-input" type="file" accept=".json,application/json" hidden>
      <p class="hint" id="cfg-status" aria-live="polite"></p>
    </section>

    <section>
      <div id="linksGrid" class="links-grid"></div>
    </section>
  </main>

  <!-- Quick Launcher (Ctrl/Cmd+K) -->
  <div id="quick-launcher" class="ql-overlay" role="dialog" aria-modal="true" aria-labelledby="ql-label" aria-hidden="true">
    <div class="ql-panel">
      <label id="ql-label" class="sr-only" for="ql-input">Quick launcher search</label>
      <input id="ql-input" class="ql-input" type="text" placeholder="Search links, go keys, or type commands (e.g., gh org/repo pr 42 | mdn fetch)‚Ä¶" autocomplete="off" spellcheck="false" aria-autocomplete="list" aria-controls="ql-list" />
      <div class="ql-divider"></div>
      <ul id="ql-list" class="ql-list" role="listbox" aria-label="Quick launcher results"></ul>
    </div>
  </div>

  <div id="mini-browser" class="mini-browser">
    <div id="mb-resize-tl" class="mb-resize-tl" aria-hidden="true"></div>
    <div class="mini-browser-bar">
      <strong class="mini-browser-title">Mini Browser</strong>
      <select id="mb-target" class="mini-browser-select" title="Where to open">
        <option value="embed">Embed</option>
        <option value="tab" selected>New Tab</option>
      </select>
      <input id="mb-url" class="mini-browser-input" type="text" value="" aria-label="Mini browser URL" />
    </div>

    <iframe id="mb-frame" class="mini-browser-frame" src="about:blank" title="Mini Browser" loading="lazy" referrerpolicy="strict-origin-when-cross-origin" allow="autoplay; clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; picture-in-picture; web-share" sandbox="allow-scripts allow-forms allow-same-origin"></iframe>
  </div>

  <!-- Keyboard Shortcuts Floating Button + Modal -->
  <button id="kb-fab" class="kb-fab" aria-label="Show keyboard shortcuts" title="Keyboard shortcuts">‚å®Ô∏è</button>
  <div id="kb-overlay" class="kb-overlay" role="dialog" aria-modal="true" aria-labelledby="kb-title" hidden>
    <div class="kb-panel">
      <div class="kb-head">
        <h3 id="kb-title">Keyboard shortcuts</h3>
        <button id="kb-close" class="kb-close" aria-label="Close">‚úï</button>
      </div>
      <ul id="kb-list" class="kb-grid"></ul>
    </div>
  </div>
  <button id="pwa-install" title="Install app" aria-label="Install app" hidden>‚¨áÔ∏è</button>
</body>
</html>


